## 指针基本

指针变量的内容大小都是一样的，和指针变量的类型无关。

在32位编译器下占用4个字节，在64位编译器下占用8个字节。

### 什么是变量地址？

变量占用储存空间最好的哪些字节地址。

### 如何获取变量的地址？

```
&变量名称;
```

### 什么是指针变量？

指针变量和普通变量一样都是用来保存数据的。只不过不同的是，指针变量是用来保存其他变量地址的。

### 如何定义指针变量？

```
数据类型 *变量名称;
```

### 实例

```c
#include <stdio.h>

int main(){
    int num = 6;
    int *p;
    p = &num;
}
```

### 其他

当指针变量保存了其他变量的地址之后，我们称之为这个指针变量指向另一个变量。当指针变量指向了另一个变量，我们就可以简介的操作另一个变量：

```c
#include <stdio.h>

int main(){
    int num = 6;
    int *p;
    p = &num;
    printf("%d\n", num);   // 输出 6
    *p = 123;
    printf("%i\n", num);   // 输出 123
}
```

注意点：

- 如果指针变量保存的不是其他变量的地址时，会访问不到数据或者是垃圾数据。
- 一个变量可以被多个指针变量指定。
- 一个指针变量的指向是可以修改的。
- 指针变量的类型必须和保存的普通变量一致。指针变量申明类型的作用：告诉操作系统，访问指向存储空间的时候需要取出多少字节的数据。

## 多级指针

多级指针申明方式：

```
int *p;
int **p;
int ***p;
```

一级指针用于保存普通变量地址的。二级指针是专门用于保存一级指针变量的地址的。三级指针式专门用于保存二级指针变量地址的。

## 指针变量和数组

通过我们的学习，我们已经知道数组名保存的就是数组的地址，所以我们可以将数组名赋值给一个指针变量：

```c
#include <stdio.h>

int main(){
    int arr[] = {1, 2, 3};
    int *p;
    p = arr;
}
```

此时相当于给数据添加了一个叫p的别名。

### 指针变量加减运算

指针变量加一就是加上指针变量数据类型的大小。代码如下：

```c
#include <stdio.h>

int main(){
    int arr[] = {1, 2, 3, 4, 5};
    int *p = &arr[3];
    printf("p指向的值为%i\n", *p);
    printf("p+1指向的值为：%i\n", *(p+1));
}
```

相当于向右移动了一位，即1X4个字节。

### 字符串和指针

字符串的特点：字符串的本质就是一个特殊的数组，即数组中保存的都是字符，且以、0结尾。正因为如此，定义字符串又多了一种方式：

```c
#include <stdio.h>

int main(){
    char *str = "hello world!\n";
    printf("%s", str);
}
```

通过指针变量接受字符串和通过数组变量接受字符串的区别：通过数组变量接收字符串，这个字符串储存在栈中，通过指针变量接收字符串，这个字符串储存在常量区中。

- 储存在栈中的数据是可以修改的，储存在常量区的数据是不可以修改的。
- 通过数组变量接受字符串，哪怕字符串中的数据相同，每次定义包会重新分配储存空间。通过指针变量接受字符串，只要字符串中的数据相同，就只有第一次会分配储存空间。

### 字符串和指针的注意点

- 通过大括号定义的字符串不能直接赋值给指针变量，只有通过双引号定义的字符串可以赋值给指针变量。
- 如果数组作为函数的参数，那么函数的形参最好写指针而不要写数组。

```c
# include <stdio.h>
int change(int *p);

int main(){
    int arr[] = {1, 2, 3};
    change(arr);
}

int change(int *p){       // 写指针
    printf("%d", p[1]);
}
```

## 指针变量和函数

数组名就是数组的地址，和数组类似，函数名也是函数的地址，所以可以将函数名赋值给一个指针变量。

### 如何定义一个指向函数的指针

代码如下：

```c
#include <stdio.h>

void test(){}

int main(){
    void (*p)();
    p = test;
}
```



## 附表

<img src="https://img2018.cnblogs.com/blog/1361134/201812/1361134-20181225082254174-984975893.png" width="100%">