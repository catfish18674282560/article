链接：https://ac.nowcoder.com/acm/contest/9162/C
来源：牛客网

时间限制：C/C++ 1秒，其他语言2秒
 空间限制：C/C++ 65536K，其他语言131072K
 64bit IO Format: %lld

## 题目描述

  ![img](https://uploadfiles.nowcoder.com/images/20201013/320265_1602599828497_54F8C9889651F3EC2537FE8B2FB65DD8)


  Tom猫突然想到一个*O*(n<sup>n!</sup>)的算法。请你告诉他n<sup>n!</sup>的值是多少。答案对1000000007取模。 

## 输入描述:

```
输入第一行包含一个整数T(1≤T≤5)，代表测试的数据组数。
随后T行每行一个整数n(1≤n≤1000000)，n的意义如题目描述所示。
```

## 输出描述:

```
输出共T行，每行输出一个整数代表答案。
```

示例1

## 输入

```
4
1
3
610
99999
```

## 输出

```
1
729
252991518
918429053
```



## 我的代码（未成功）

原因：爆数据了。

```c
#include<stdio.h>
#include<math.h>

int PowerMod(int a, int b, int c)
{
  int ans = 1;
  a = a % c;
  while(b>0) {
    if(b % 2 == 1)
    ans = (ans * a) % c;
    b = b/2;
    a = (a * a) % c;
  }
  return ans;
}

int main(){
    int all;
    scanf("%d", &all);
    for (int i=0; i<all; i++){
        int num = 1, sum = 1;
        int final;
        scanf("%d", &num);
        for(int n=1; n<num+1; n++){
            sum *= n;
            final = PowerMod(num, sum, 100000000007);
        }
        printf("%i\n", final);
    }
}
```

## 解题知识

https://www.luogu.com.cn/problem/P5282

```c
# include <stdio.h>
 
const int mod = 1e9 + 7;
int phi;
 
int qpow(int x, int p) {
    int ans = 1 % mod;
     
    while (p) {
        if (p & 1) {
            ans = 1ll * ans * x % mod;
        }
         
        x = 1ll * x * x % mod;
        p >>= 1;
    }
     
    return ans;
}
 
int fphi(int n) {
    int ans = n;
    for (int i = 2; i <= n / i; i++) {
        if (n % i == 0) {
            ans = ans / i * (i - 1);
             
            while (n % i == 0) {
                n /= i;
            }
        }
    }
     
    if (n > 1) {
        ans = ans / n * (n - 1);
    }
     
    return ans;
}
 
 
void solve() {
    int n;
    scanf("%d", &n);
     
    int ans = 1;
    for (int i = 2; i <= n; i++) {
        ans = 1ll * ans * i % phi;
    }
     
    printf("%d\n", qpow(n, ans));
}
 
int main() {
    int T;
    scanf("%d", &T);
    phi = fphi(mod);
     
    while (T--) {
        solve();
    }
 
    return 0;
}
```

